{"version":3,"sources":["../controllers/myPollsCtrl.js"],"names":["angular","module","controller","$scope","$http","polls","get","then","response","i","len","data","length","showOptions","catch","error","findPollIndexById","pollID","id_poll","confirmDeletePoll","deletePoll","method","url","index","splice","err","console","log","confirmDisablePoll","disablePoll","is_active"],"mappings":";;AAAE,aAAU;;AAEV;;AAEAA,UAAQC,MAAR,CAAe,eAAf,EACCC,UADD,CACY,aADZ,EAC0B,CAAC,QAAD,EAAU,OAAV,EAAkB,UAASC,MAAT,EAAgBC,KAAhB,EAAsB;AAChED,WAAOE,KAAP,GAAe,IAAf;;AAEAD,UAAME,GAAN,CAAU,sBAAV,EAAkCC,IAAlC,CAAuC,UAASC,QAAT,EAAkB;AACvD,WAAM,IAAIC,IAAI,CAAR,EAAYC,MAAMF,SAASG,IAAT,CAAcC,MAAtC,EAA+CH,IAAIC,GAAnD,EAAyDD,GAAzD,EAA+D;AAC7DD,iBAASG,IAAT,CAAcF,CAAd,EAAiBI,WAAjB,GAA+B,KAA/B;AACD;;AAEDV,aAAOE,KAAP,GAAeG,SAASG,IAAxB;AACD,KAND,EAMGG,KANH,CAMS,UAASC,KAAT,EAAe,CAEvB,CARD;;AAUA,QAAIC,oBAAoB,SAApBA,iBAAoB,CAASC,MAAT,EAAiB;AACvC,WAAM,IAAIR,IAAI,CAAR,EAAYC,MAAMP,OAAOE,KAAP,CAAaO,MAArC,EAA8CH,IAAIC,GAAlD,EAAwDD,GAAxD,EAA8D;AAC5D,YAAKN,OAAOE,KAAP,CAAaI,CAAb,EAAgBS,OAAhB,KAA4BD,MAAjC,EAA0C;AACxC,iBAAOR,CAAP;AACD;AACF;;AAED,aAAO,CAAC,CAAR;AACD,KARD;;AAUAN,WAAOgB,iBAAP,GAA2B,UAASF,MAAT,EAAiB;AAC1Cd,aAAOiB,UAAP,CAAkBH,MAAlB;AACD,KAFD;;AAIAd,WAAOiB,UAAP,GAAoB,UAASH,MAAT,EAAiB;AACnCb,YAAM;AACJiB,gBAAO,MADH;AAEJC,aAAI,wBAFA;AAGJX,cAAK;AACHM,kBAAOA;AADJ;AAHD,OAAN,EAMGV,IANH,CAMQ,UAASC,QAAT,EAAkB;AACxB,YAAIe,QAAQP,kBAAkBC,MAAlB,CAAZ;;AAEA,YAAKM,UAAU,CAAC,CAAhB,EAAoB;AAClBpB,iBAAOE,KAAP,CAAamB,MAAb,CAAoBD,KAApB,EAA0B,CAA1B;AACD;AAEF,OAbD,EAaGT,KAbH,CAaS,UAASW,GAAT,EAAa;AACpBC,gBAAQC,GAAR,CAAYF,GAAZ;AACD,OAfD;AAgBD,KAjBD;;AAmBAtB,WAAOyB,kBAAP,GAA4B,UAASX,MAAT,EAAiB;AAC3Cd,aAAO0B,WAAP,CAAmBZ,MAAnB;AACD,KAFD;;AAIAd,WAAO0B,WAAP,GAAqB,UAASZ,MAAT,EAAiB;AACpCb,YAAM;AACJiB,gBAAO,MADH;AAEJC,aAAI,yBAFA;AAGJX,cAAK;AACHM,kBAAOA;AADJ;AAHD,OAAN,EAMGV,IANH,CAMQ,UAASC,QAAT,EAAkB;AACxB,YAAIe,QAAQP,kBAAkBC,MAAlB,CAAZ;;AAEA,YAAKM,UAAU,CAAC,CAAhB,EAAoB;AAClBpB,iBAAOE,KAAP,CAAakB,KAAb,EAAoBO,SAApB,GAAgC,KAAhC;AACD;AACF,OAZD,EAYGhB,KAZH,CAYS,UAASN,QAAT,EAAkB;AACzBkB,gBAAQC,GAAR,CAAYnB,QAAZ;AACD,OAdD;AAeD,KAhBD;AAkBD,GApEyB,CAD1B;AAuED,CA3EC,GAAF","file":"myPollsCtrl.js","sourcesContent":["( function(){\n\n  'use strict';\n\n  angular.module('realTimePolls')\n  .controller('myPollsCtrl',['$scope','$http',function($scope,$http){\n    $scope.polls = null;\n\n    $http.get('/api/public/getPolls').then(function(response){\n      for ( var i = 0 , len = response.data.length ; i < len ; i++ ) {\n        response.data[i].showOptions = false;\n      }\n\n      $scope.polls = response.data;\n    }).catch(function(error){\n\n    });\n\n    var findPollIndexById = function(pollID) {\n      for ( var i = 0 , len = $scope.polls.length ; i < len ; i++ ) {\n        if ( $scope.polls[i].id_poll === pollID ) {\n          return i;\n        }\n      }\n\n      return -1;\n    }\n\n    $scope.confirmDeletePoll = function(pollID) {\n      $scope.deletePoll(pollID);\n    }\n\n    $scope.deletePoll = function(pollID) {\n      $http({\n        method:'POST',\n        url:'/api/public/deletePoll',\n        data:{\n          pollID:pollID\n        }\n      }).then(function(response){\n        var index = findPollIndexById(pollID);\n\n        if ( index !== -1 ) {\n          $scope.polls.splice(index,1);\n        }\n\n      }).catch(function(err){\n        console.log(err);\n      });\n    }\n\n    $scope.confirmDisablePoll = function(pollID) {\n      $scope.disablePoll(pollID);\n    }\n\n    $scope.disablePoll = function(pollID) {\n      $http({\n        method:'POST',\n        url:'/api/public/disablePoll',\n        data:{\n          pollID:pollID\n        }\n      }).then(function(response){\n        var index = findPollIndexById(pollID);\n\n        if ( index !== -1 ) {\n          $scope.polls[index].is_active = false;\n        }\n      }).catch(function(response){\n        console.log(response);\n      });\n    }\n\n  }]);\n\n}());"]}