{"version":3,"sources":["../controllers/addPollCtrl.js"],"names":["angular","module","controller","$scope","$http","$sce","socket","io","pollName","choicesHTML","showUsername","renderChoices","numChoices","Number","numberOfChoices","choices","i","push","trustAsHtml","join","addPoll","allChoices","Array","prototype","slice","call","$","values","len","length","value","data","method","url","then","response","console","log","success","emit","pollID","catch","error"],"mappings":";;AAAE,aAAU;;AAEV;;AAEAA,UAAQC,MAAR,CAAe,eAAf,EACCC,UADD,CACY,aADZ,EAC0B,CAAC,QAAD,EAAU,OAAV,EAAkB,MAAlB,EAAyB,UAASC,MAAT,EAAgBC,KAAhB,EAAsBC,IAAtB,EAA2B;AAC5E,QAAIC,SAASC,IAAb;;AAEA;AACAJ,WAAOK,QAAP,GAAkB,EAAlB;AACAL,WAAOM,WAAP;AACAN,WAAOO,YAAP,GAAsB,IAAtB;;AAEAP,WAAOQ,aAAP,GAAuB,YAAW;AAChC,UAAIC,aAAaC,OAAOV,OAAOW,eAAd,CAAjB;;AAEA,UAAIC,UAAU,EAAd;;AAEA,WAAM,IAAIC,IAAI,CAAd,EAAkBA,KAAKJ,UAAvB,EAAoCI,GAApC,EAAyC;AACvCD,gBAAQE,IAAR,CAAa,uEAAb;AACD;;AAEDd,aAAOM,WAAP,GAAqBJ,KAAKa,WAAL,CAAiBH,QAAQI,IAAR,CAAa,EAAb,CAAjB,CAArB;AACD,KAVD;;AAYAhB,WAAOiB,OAAP,GAAiB,YAAW;AAC1B,UACEC,aAAaC,MAAMC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,EAAE,UAAF,CAA3B,CADf;AAAA,UAEEC,SAAa,EAFf;;AAIA,WAAM,IAAIX,IAAI,CAAR,EAAYY,MAAMP,WAAWQ,MAAnC,EAA4Cb,IAAIY,GAAhD,EAAsDZ,GAAtD,EAA4D;AAC1DW,eAAOV,IAAP,CAAYI,WAAWL,CAAX,EAAcc,KAA1B;AACD;;AAED,UAAIC,OAAO;AACTvB,kBAASL,OAAOK,QADP;AAETO,iBAAQY,MAFC;AAGTjB,sBAAaP,OAAOO;AAHX,OAAX;;AAMAN,YAAM;AACJ4B,gBAAO,MADH;AAEJC,aAAI,qBAFA;AAGJF,cAAKA;AAHD,OAAN,EAIGG,IAJH,CAIQ,UAASC,QAAT,EAAkB;AACxBC,gBAAQC,GAAR,CAAYF,SAASJ,IAArB;AACA,YAAKI,SAASJ,IAAT,CAAcO,OAAnB,EAA6B;AAC3BhC,iBAAOiC,IAAP,CAAY,WAAZ,EAAwB;AACtBC,oBAAOL,SAASJ,IAAT,CAAcS;AADC,WAAxB;AAGD,SAJD,MAIO;AACLJ,kBAAQC,GAAR,CAAYF,SAASJ,IAArB;AACD;AACF,OAbD,EAaGU,KAbH,CAaS,UAASC,KAAT,EAAe;AACtBN,gBAAQC,GAAR,CAAYK,KAAZ;AACD,OAfD;AAgBD,KA/BD;AAgCD,GApDyB,CAD1B;AAuDD,CA3DC,GAAF","file":"addPollCtrl.js","sourcesContent":["( function(){\n\n  'use strict';\n\n  angular.module('realTimePolls')\n  .controller('addPollCtrl',['$scope','$http','$sce',function($scope,$http,$sce){\n    var socket = io();\n\n    //$scope.numberOfChoices = 2;\n    $scope.pollName = '';\n    $scope.choicesHTML;\n    $scope.showUsername = true;\n\n    $scope.renderChoices = function() {\n      var numChoices = Number($scope.numberOfChoices);\n\n      var choices = [];\n\n      for ( var i = 1 ; i <= numChoices ; i++) {\n        choices.push('<input class=\"form-control choices\" type=\"text\" placeholder=\"Enter\"/>');\n      }\n\n      $scope.choicesHTML = $sce.trustAsHtml(choices.join(''));\n    }\n\n    $scope.addPoll = function() {\n      var \n        allChoices = Array.prototype.slice.call($('.choices')),\n        values     = [];\n\n      for ( var i = 0 , len = allChoices.length ; i < len ; i++ ) {\n        values.push(allChoices[i].value);\n      }\n\n      var data = {\n        pollName:$scope.pollName,\n        choices:values,\n        showUsername:$scope.showUsername\n      };\n\n      $http({\n        method:'POST',\n        url:'/api/public/addPoll',\n        data:data\n      }).then(function(response){\n        console.log(response.data);\n        if ( response.data.success ) {\n          socket.emit('pollAdded',{\n            pollID:response.data.pollID\n          });  \n        } else {\n          console.log(response.data);\n        }\n      }).catch(function(error){\n        console.log(error);\n      });\n    }\n  }]);\n\n}());"]}