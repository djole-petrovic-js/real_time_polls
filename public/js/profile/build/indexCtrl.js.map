{"version":3,"sources":["../controllers/indexCtrl.js"],"names":["angular","module","controller","$scope","$http","passwords","current","newPassword","confirmNew","user","newUsername","delAccountPassword","get","then","response","data","catch","error","console","log","confirmUsernameChange","changeUsername","method","url","success","username","err","confirmDeleteAccount","deleteAccount","password","window","location","href","confirmPasswordChange","changePassword"],"mappings":";;AAAE,aAAU;;AAEV;;AAEAA,UAAQC,MAAR,CAAe,eAAf,EACCC,UADD,CACY,WADZ,EACwB,CAAC,QAAD,EAAU,OAAV,EAAkB,UAASC,MAAT,EAAgBC,KAAhB,EAAsB;AAC9DD,WAAOE,SAAP,GAAmB;AACjBC,eAAQ,EADS;AAEjBC,mBAAY,EAFK;AAGjBC,kBAAW;AAHM,KAAnB;;AAMAL,WAAOM,IAAP,GAAc,IAAd;;AAEAN,WAAOO,WAAP,GAAqB,EAArB;AACAP,WAAOQ,kBAAP,GAA4B,EAA5B;;AAEAP,UACGQ,GADH,CACO,yBADP,EAEGC,IAFH,CAEQ,UAASC,QAAT,EAAkB;AACtBX,aAAOM,IAAP,GAAcK,SAASC,IAAvB;AACD,KAJH,EAKGC,KALH,CAKS,UAASC,KAAT,EAAe;AACpBC,cAAQC,GAAR,CAAYF,KAAZ;AACD,KAPH;;AASAd,WAAOiB,qBAAP,GAA+B,YAAW;AACxCjB,aAAOkB,cAAP;AACD,KAFD;;AAIAlB,WAAOkB,cAAP,GAAwB,YAAW;AACjCjB,YAAM;AACJkB,gBAAO,MADH;AAEJC,aAAI,4BAFA;AAGJR,cAAK;AACHL,uBAAYP,OAAOO;AADhB;AAHD,OAAN,EAMGG,IANH,CAMQ,UAASC,QAAT,EAAkB;;AAExB,YAAKA,SAASC,IAAT,CAAcS,OAAnB,EAA6B;AAC3BrB,iBAAOM,IAAP,CAAYgB,QAAZ,GAAuBtB,OAAOO,WAA9B;AACAP,iBAAOO,WAAP,GAAqB,EAArB;AACD,SAHD,MAGO;AACLQ,kBAAQC,GAAR,CAAYL,SAASC,IAArB;AACD;AAEF,OAfD,EAeGC,KAfH,CAeS,UAASU,GAAT,EAAa;AACpBR,gBAAQC,GAAR,CAAYO,GAAZ;AACD,OAjBD;AAkBD,KAnBD;;AAqBAvB,WAAOwB,oBAAP,GAA8B,YAAW;AACvCxB,aAAOyB,aAAP;AACD,KAFD;;AAIAzB,WAAOyB,aAAP,GAAuB,YAAW;AAChCxB,YAAM;AACJkB,gBAAO,MADH;AAEJC,aAAI,2BAFA;AAGJR,cAAK;AACHc,oBAAS1B,OAAOQ;AADb;AAHD,OAAN,EAMGE,IANH,CAMQ,UAASC,QAAT,EAAkB;AACxB,YAAKA,SAASC,IAAT,CAAcS,OAAnB,EAA6B;AAC3BM,iBAAOC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD;AAEF,OAXD,EAWGhB,KAXH,CAWS,UAASC,KAAT,EAAe;AACtBC,gBAAQC,GAAR,CAAYF,KAAZ;AACD,OAbD;AAcD,KAfD;;AAiBAd,WAAO8B,qBAAP,GAA+B,YAAW;AACxC9B,aAAO+B,cAAP;AACD,KAFD;;AAIA/B,WAAO+B,cAAP,GAAwB,YAAU;AAChC9B,YAAM;AACJkB,gBAAO,MADH;AAEJC,aAAI,4BAFA;AAGJR,cAAKZ,OAAOE;AAHR,OAAN,EAIGQ,IAJH,CAIQ,UAASC,QAAT,EAAkB;AACxBI,gBAAQC,GAAR,CAAYL,QAAZ;AACD,OAND,EAMGE,KANH,CAMS,UAASC,KAAT,EAAe;AACtBC,gBAAQC,GAAR,CAAYF,KAAZ;AACD,OARD;AASD,KAVD;AAYD,GAnFuB,CADxB;AAsFD,CA1FC,GAAF","file":"indexCtrl.js","sourcesContent":["( function(){\n\n  'use strict';\n\n  angular.module('realTimePolls')\n  .controller('indexCtrl',['$scope','$http',function($scope,$http){\n    $scope.passwords = {\n      current:'',\n      newPassword:'',\n      confirmNew:''\n    };\n\n    $scope.user = null;\n\n    $scope.newUsername = '';\n    $scope.delAccountPassword = '';\n\n    $http\n      .get('/api/public/getUserInfo')\n      .then(function(response){\n        $scope.user = response.data;\n      })\n      .catch(function(error){\n        console.log(error);\n      });\n\n    $scope.confirmUsernameChange = function() {\n      $scope.changeUsername();\n    }\n\n    $scope.changeUsername = function() {\n      $http({\n        method:'POST',\n        url:'/api/public/changeUsername',\n        data:{\n          newUsername:$scope.newUsername\n        }\n      }).then(function(response){\n\n        if ( response.data.success ) {\n          $scope.user.username = $scope.newUsername;\n          $scope.newUsername = '';  \n        } else {\n          console.log(response.data);\n        }\n        \n      }).catch(function(err){\n        console.log(err);\n      });\n    }\n\n    $scope.confirmDeleteAccount = function() {\n      $scope.deleteAccount();\n    }\n\n    $scope.deleteAccount = function() {\n      $http({\n        method:'POST',\n        url:'/api/public/deleteAccount',\n        data:{\n          password:$scope.delAccountPassword\n        }\n      }).then(function(response){\n        if ( response.data.success ) {\n          window.location.href = '/';\n        }\n        \n      }).catch(function(error){\n        console.log(error);\n      })\n    }\n\n    $scope.confirmPasswordChange = function() {\n      $scope.changePassword();\n    }\n\n    $scope.changePassword = function(){\n      $http({\n        method:'POST',\n        url:'/api/public/changePassword',\n        data:$scope.passwords\n      }).then(function(response){\n        console.log(response);\n      }).catch(function(error){\n        console.log(error);\n      });\n    }\n\n  }]);\n\n}());"]}